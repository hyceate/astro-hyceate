---
// Art Page
import Layout from "@layouts/Layout.astro";
import ArtList from "@components/content/artPosts.svelte";
import { fetchList } from "@lib/stores/fetchData";
// import { Picture } from "astro:assets";
import { Picture } from "astro-imagetools/components";
import { urlFor } from "@lib/utils/image";

const category = "art";
let postsFetched = await fetchList(category);
let posts = postsFetched.posts;
// console.log("posts fetched", posts);
---

<Layout title="Hyceate's Arts Page" description="Hyceate's list of artworks."
  ><section class="flex flex-col justify-start items-center">
    {
      postsFetched?.categoryQuery && (
        <h1 class="text-4xl uppercase mb-10 font-medium tracking-wider">
          {postsFetched?.categoryQuery}
        </h1>
      )
    }
    <ul class="flex flex-wrap max-w-6xl justify-center md:justify-normal">
      {
        posts.length
          ? posts.map((post) => (
              <ArtList category={category} post={post}>
                <div class="contents" slot="image">
                  <Picture
                    src={urlFor(post.mainImage).width(1280).height(720).url()}
                    alt={post.mainImage.alt}
                    width={1280}
                    loading="lazy"
                    placeholder="dominantColor"
                    preload="webp"
                    fadeInTransition={{
                      delay: ".3s",
                      duration: ".4s",
                      timingFunction: "ease-in",
                    }}
                    attributes={{
                      img: {
                        class:
                          "flex-[1_1_auto] h-full w-full min-h-[10rem] min-w-[15rem] rounded-md object-cover object-center",
                      },
                    }}
                  />
                </div>
              </ArtList>
            ))
          : "Data not Found"
      }
    </ul>
  </section>
</Layout>
